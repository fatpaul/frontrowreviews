<html>
<head>
<title>Front Row Reviews - Movies</title>
<link rel="stylesheet" href="css/main.css" type="text/css" />
<script lang="JavaScript" src="js/external/jquery-2.0.3.min.js"></script>
<script>
	function addMovieFromFormData() {
		$.ajax({
			type : "GET",
			url : "rest/movie",
			contentType : "application/json",
		}).done(function(response) {
			if(response){
				addToTable(response.movieViewModel);
			}
		});
	}

	function addToTable(data) {
		var table = document.createElement("table");
		table.setAttribute("class", "moviesTable");
		
		if(!data.length){
			addRow(table,data);
		} else {
			for (var i = 0; i < data.length; i++) {
				var rowData = data[i];
				addRow(table,rowData);
			}
		}
		$('#tableLocation').append(table);
	}
	
	function addRow(table, rowData){
		var row = document.createElement("tr");
		var cell = document.createElement("td");
		cell.innerHTML = rowData.title;
		row.appendChild(cell);
		cell = document.createElement("td");
		cell.innerHTML = "<a class=\"button\" href=\"#\">Review</a>";
		row.appendChild(cell);
		table.appendChild(row);
	}
	
</script>

</head>
<body>

	<div id="header-nav"></div>

	<script>
		$("#header-nav").load("/components/header.html");
	</script>
	<div class="contentClass">

		<h2>Movie list:</h2>

		<div id="tableLocation"></div>
		<script>
			addMovieFromFormData();
		</script>

		<div id="addMovieStatus"></div>
	</div>
</body>
</html>