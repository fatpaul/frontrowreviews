<html xmlns="http://www.w3.org/1999/xhtml"><head>
<title>Front Row Reviews - Review Movie</title>
<link type="text/css" href="css/main.css" rel="stylesheet" />
<script src="js/external/jquery-2.0.3.min.js"></script>
<script>

	function addMovieReview() {
		
		var emailAddress = $("#emailAddress").val();
		if(emailAddress !== ""){
			
			$("#addReviewStatus").html("Saving...");
	
			var review = {
				key : sessionStorage.movieKey,
				review : $('#review').val()
			};
	
			$.ajax({
				dataType : "json",
				type : "POST",
				url : "rest/review",
				contentType : "application/json",
				data : JSON.stringify(review),
			}).done(function(response) {
				$("#addReviewStatus").html(response.url);
			});
		} else {
			alert("Please enter an email address to review a movie.");
		}
	}
</script>

</head>
<body>

	<div id="header-nav"><div class="headerClass">
	<center>
		<img border="0" src="images/frontrow-logo.png" />
	</center>
</div>
<div class="headerLinks">
	<a href="index.html" id="homeNavButton" class="button">Home</a> <a href="list_movies.html" id="listMoviesNavButton" class="button">List
		movies</a> <a href="add_movie.html" id="addMovieNavButton" class="button">Add
		movie</a> <input type="text" placeholder="Enter Email Address" onchange="storeInSession();" id="emailAddress" size="30" class="emailAddressFld" />

	<script>
		if (sessionStorage.emailAddress !== "") {
			$("#emailAddress").val(sessionStorage.emailAddress);
		}

		function storeInSession() {
			sessionStorage.emailAddress = $("#emailAddress").val();

		}
	</script>

</div>
</div>

	<script>
		$("#header-nav").load("/components/header.html");
	</script>

	<div class="contentClass">

		<h2>Add a movie review</h2>

		<table>
			<tbody><tr>
				<td>Your Review:</td>
            </tr><tr>
				<td><textarea rows="10" cols="50" id="review"></textarea></td>
			</tr>
			<tr>
				<td><input type="button" value="Add Review" onclick="addMovieReview()" id="addMovieReviewBtn" /></td>
			</tr>
		</tbody></table>

        <div id="addReviewStatus">/rest/review/1</div>
	</div>

</body></html>